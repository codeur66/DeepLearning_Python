pipeline {
    agent any
    stages{
        stage('build'){
            agent{
                docker{
                    image 'python:node-build'
                }
            }
            steps{
                 sh  'python natural_language_processing/data/start_data_pipeline.py'
            }
            steps{
                 sh  'python natural_language_processing/model/Model.py'
            }
        }
        stage('test'){
                sh  'echo start the tests'
                echo "Code Coverage"
                sh  ''' source activate ${BUILD_TAG}
                        coverage run natural_language_processing/utils/run_every_test.sh 1 1 2 3
                        python -m coverage xml -o ./reports/coverage.xml
                    '''
        }
        stage('deploy'){

        }
    }
}